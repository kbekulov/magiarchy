<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Frosty Data Visualization</title>
    <style>
        :root {
            --background-color: #101010; /* Very dark grey background */
            --true-color: rgba(100, 170, 255, 0.9); /* Frosty cyan */
            --false-color: rgba(210, 70, 70, 0.9); /* Frosty red */
            --neutral-color: rgba(200, 200, 200, 0.8); /* Neutral for faded text */
            --line-color: rgba(255, 255, 255, 0.3);
            --text-color: #e8f0fa;
            --highlighted-text-color: rgba(232, 240, 250, 1);
            --bar-bg: rgba(255, 255, 255, 0.1);
            --faded-bar-bg: rgba(255, 255, 255, 0.05);
        }

        body {
            margin: 0;
            font-family: 'Arial', sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        h1 {
            color: var(--text-color);
            margin-top: 20px;
            font-size: 2.2rem;
        }

        .section-title {
            color: var(--highlighted-text-color);
            font-size: 1.5rem;
            margin: 20px 0 10px;
            text-align: center;
            border-bottom: 1px solid var(--line-color);
            padding-bottom: 5px;
        }

        .stats-container {
            width: 90%;
            max-width: 1200px;
            margin: 20px auto;
        }

        .bar-chart {
            margin: 20px 0;
        }

        .bar {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .bar-label {
            width: 25%;
            font-size: 1rem;
            color: var(--text-color);
        }

        .bar-fill {
            flex-grow: 1;
            height: 20px;
            border-radius: 5px;
            background: var(--bar-bg);
            position: relative;
        }

        .bar-fill.faded {
            background: var(--faded-bar-bg);
        }

        .bar-content {
            height: 100%;
            border-radius: 5px;
            transition: all 0.3s ease;
        }

        .bar-content[data-type="true"] {
            background: var(--true-color);
        }

        .bar-content[data-type="false"] {
            background: var(--false-color);
        }

        .bar-value {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 0.9rem;
            color: var(--text-color);
        }

        /* Combat Losses Table */
        .combat-losses {
            width: 100%;
            margin: 20px 0;
            border-collapse: collapse;
        }

        .combat-losses th, .combat-losses td {
            border: 1px solid var(--line-color);
            padding: 10px;
            text-align: center;
        }

        .combat-losses th {
            background-color: var(--neutral-color);
            color: var(--background-color);
            font-size: 1rem;
        }

        .combat-losses td {
            font-size: 0.95rem;
        }

    </style>
</head>
<body>

<h1>Frosty Data Visualization</h1>
<div class="masonry-container" id="masonry-container"></div>

<!-- Army Stats Section -->
<div class="stats-container">
    <div class="section-title">Army Personnel Comparison</div>
    <div class="bar-chart" id="army-stats"></div>
</div>

<!-- Territorial Control Section -->
<div class="stats-container">
    <div class="section-title">Territorial Control</div>
    <div class="bar-chart" id="territorial-control"></div>
</div>

<!-- Combat Losses Section -->
<div class="stats-container">
    <div class="section-title">Combat Losses</div>
    <table class="combat-losses" id="combat-losses">
        <thead>
            <tr>
                <th>Country</th>
                <th>Total Losses</th>
                <th>Killed</th>
                <th>Wounded</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>
</div>

<div class="footer">
    <p>Powered by <a href="#">Your App</a></p>
</div>

<script>
    async function loadFactsAndStats() {
        try {
            const response = await fetch('data.json');
            const data = await response.json();

            // Load Facts into Masonry
            const masonryContainer = document.getElementById('masonry-container');
            data.facts.forEach(fact => {
                const brick = document.createElement('div');
                brick.className = 'masonry-brick';
                brick.setAttribute('data-truth', fact.isTrue);

                brick.innerHTML = `
                    <div class="brick-header">${fact.isTrue ? 'True' : 'False'}</div>
                    <div class="brick-title">${fact.text}</div>
                    <div class="section-heading">${fact.isTrue ? "Why it's true:" : "Why it's false:"}</div>
                    <div class="brick-description">${fact.description}</div>
                `;

                masonryContainer.appendChild(brick);
            });

            createMasonryLayout(masonryContainer);

            // Load Army Stats
            const armyStatsContainer = document.getElementById('army-stats');
            data.armyStats.forEach(stat => {
                const bar = document.createElement('div');
                bar.className = 'bar';
                bar.innerHTML = `
                    <div class="bar-label">${stat.label}</div>
                    <div class="bar-fill ${stat.faded ? 'faded' : ''}">
                        <div class="bar-content" data-type="${stat.faded ? 'false' : 'true'}" style="width: ${stat.barLength};"></div>
                        <div class="bar-value">${stat.personnel.toLocaleString()}</div>
                    </div>
                `;
                armyStatsContainer.appendChild(bar);
            });

            // Load Territorial Control
            const territorialControlContainer = document.getElementById('territorial-control');
            data.territorialControl.forEach(control => {
                const bar = document.createElement('div');
                bar.className = 'bar';
                bar.innerHTML = `
                    <div class="bar-label">${control.label}</div>
                    <div class="bar-fill">
                        <div class="bar-content" data-type="true" style="width: ${control.barLength};"></div>
                        <div class="bar-value">${control.area.toLocaleString()} kmÂ²</div>
                    </div>
                `;
                territorialControlContainer.appendChild(bar);
            });

            // Load Combat Losses
            const combatLossesTable = document.getElementById('combat-losses').querySelector('tbody');
            data.combatLosses.forEach(loss => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${loss.label}</td>
                    <td>${loss.total.toLocaleString()}</td>
                    <td>${loss.killed}</td>
                    <td>${loss.wounded}</td>
                `;
                combatLossesTable.appendChild(row);
            });
        } catch (error) {
            console.error('Error loading data:', error);
        }
    }

    function createMasonryLayout(container) {
        const bricks = Array.from(container.children);
        const columnCount = Math.floor(container.clientWidth / 300);
        const columnHeights = Array(columnCount).fill(0);
        const columnWidth = container.clientWidth / columnCount;

        bricks.forEach(brick => {
            const minColumnHeight = Math.min(...columnHeights);
            const columnIndex = columnHeights.indexOf(minColumnHeight);

            brick.style.width = `${columnWidth - 20}px`;
            brick.style.top = `${minColumnHeight}px`;
            brick.style.left = `${columnIndex * columnWidth}px`;

            columnHeights[columnIndex] += brick.offsetHeight + 20;
        });

        container.style.height = `${Math.max(...columnHeights)}px`;
    }

    window.addEventListener('load', loadFactsAndStats);
    window.addEventListener('resize', () => createMasonryLayout(document.getElementById('masonry-container')));
</script>

</body>
</html>
